# cadr4

Experiments of the third kind...  This is an attempt at making a
faithful and accurate HDL implementation of CADR.  There will be no
attempt at making this synthesizable (at this time)!

## Random chit-chat

There is a IRC channel on irc.libera.net, ##lispm for random
chit-chat.  Feel free to send bugs directly to ams@gnu.org.

## Setup

### Prerequisites

- Git
- GNU Make
- Python 3
- [GHDL](http://ghdl.free.fr/) with the GCC or LLVM code generator
- optionally some sort of VCD viewer:
  - [GTKWave](https://gtkwave.sourceforge.net/)
  - [Surfer](https://surfer-project.org)

### Build

```
git clone https://github.com/ams/cadr4
cd cadr4
make
```

All build artifacts are created under `build` directory.

### Run Tests

```
make check
```

runs all available tests.

### Run CADR

A special testbench cadr_tb is autogenerated by make, and it connects everything in CADR and ICMEM. It can be run for a fixed time using:

```
make run-cadr
```

#### waveform.opt file

If there is a `X_tb.opt` file next to `X_tb.vhd`, it is used as waveform options file in GHDL (`--read-wave-opt`).

If the file contains "recreate" in its first line, the file is deleted and recreated. This will show all signal paths.

If the file contains "ignore" in its first line, the file is ignored, `--read-wave-opt` is not used.

## File Organization

- cadr: CADR schematics in VHDL
- dip: dip components
- doc: various documents
  - ai:
  - promh.9: PROMH.9 sources
  - schematics:
  - to-verify:
  - ttl: the datasheets of TTL components
- ghdl-uart:
- helper: helper (non-CADR) components
- rom: ROM files loaded to CADR (P)ROMs
- scripts: helper/utility scripts
- soap: utility to generate cadr_*_suds.vhd files
- tb: system tests
- ttl: ttl components

Each folder should have a README.md containing more information.

## Packages

- work.cadr: cadr components
- work.dip: dip components
- work.amd,ecc,fairchild,intel,signetics,sn74,other: ttl components
- work.misc: misc functions and procedures (no components)

## Documentation

- [The CADR Microprocessor](https://tumbleweed.nu/r/lm-3/uv/cadr.html)
- [Implementation of a List Processing Machine](https://tumbleweed.nu/r/lm-3/uv/knight-thesis.html)
- [CADR Schematics](https://tumbleweed.nu/lm-3/schematics.html)
- [Interactive CADR Schematics](https://www.nexoid.at/cadr/clock1.html)
