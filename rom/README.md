
# rom

This folder contains PROM and RAM hex files and generic-map tables.

## dspctl and mskg4

dspctl and mskg4 uses dspctl.2f22.hex and mskg4.*.hex files.

## promh.mcr.9.hex and promh9.table

promh.mcr.9.hex is the official and original PROM of CADR.

This file is used to generate promh9/*.hex files. They can be regenerated with `make regenerate-hex-files`.

To use this prom, promh9.table should be used with fix-suds.py. This is done by calling `make regenerate-promh9-suds`.

## fast-promh.mcr.hex and fast-promh.table

fast-promh.mcr.hex is promh.mcr.9.hex with a modified first instruction, which jumps to 0257 (FUDGE-INITIAL-DISK-PARAMETERS) rather than 045 (GO). The idea is to skip memory initialization to speed up booting. When it is used, all memories have to be initialized and some has to be pre-loaded with some values.

amem.hex, dram.hex, mmem.hex and vmem0.hex contains the preloading values for A-MEMORY, D-MEMORY (DPC), M-MEMORY and LEVEL-1-MAP.

These files are used to generate fast-promh/*.hex files. They can be regenerated with `make regenerate-hex-files`.

To use this prom, fast-promh.table should be used with fix-suds.py. This is done by calling `make regenerate-fast-promh-suds`. This is the default and the suds file in the repo are generated like this.

# Details

## DSPCTL

DSPCTL.2F22	// dispatch prom

0 0000000
1 0000001
2 0000011
3 0000111
4 0001111
5 0011111
6 0111111
7 1111111

## MSKG4 (mask generation)

MSKG4_2D12	// right, 24-31
MSKG4_2E12	// r, 16-23
MSKG4_2D17	// r, 8-15
MSKG4_2E17	// r, 0-7

MSKG4_2D11	// left, 24-31
MSKG4_2E11	// l, 16-23
MSKG4_2D16	// l, 8-15
MSKG4_2E16	// l, 0-7

octal  LEFT MASK MEMORY contents            RIGHT MASK MEMORY contents
index
  0    00000000000000000000000000000001     11111111111111111111111111111111
  1    00000000000000000000000000000011     11111111111111111111111111111110
  2    00000000000000000000000000000111     11111111111111111111111111111100
  3    00000000000000000000000000001111     11111111111111111111111111111000
  4    00000000000000000000000000011111     11111111111111111111111111110000
  5    00000000000000000000000000111111     11111111111111111111111111100000
  6    00000000000000000000000001111111     11111111111111111111111111000000
  7    00000000000000000000000011111111     11111111111111111111111110000000
 10    00000000000000000000000111111111     11111111111111111111111100000000
 11    00000000000000000000001111111111     11111111111111111111111000000000
 12    00000000000000000000011111111111     11111111111111111111110000000000
 13    00000000000000000000111111111111     11111111111111111111100000000000
 14    00000000000000000001111111111111     11111111111111111111000000000000
 15    00000000000000000011111111111111     11111111111111111110000000000000
 16    00000000000000000111111111111111     11111111111111111100000000000000
 17    00000000000000001111111111111111     11111111111111111000000000000000
 20    00000000000000011111111111111111     11111111111111110000000000000000
 21    00000000000000111111111111111111     11111111111111100000000000000000
 22    00000000000001111111111111111111     11111111111111000000000000000000
 23    00000000000011111111111111111111     11111111111110000000000000000000
 24    00000000000111111111111111111111     11111111111100000000000000000000
 25    00000000001111111111111111111111     11111111111000000000000000000000
 26    00000000011111111111111111111111     11111111110000000000000000000000
 27    00000000111111111111111111111111     11111111100000000000000000000000
 30    00000001111111111111111111111111     11111111000000000000000000000000
 31    00000011111111111111111111111111     11111110000000000000000000000000
 32    00000111111111111111111111111111     11111100000000000000000000000000
 33    00001111111111111111111111111111     11111000000000000000000000000000
 34    00011111111111111111111111111111     11110000000000000000000000000000
 35    00111111111111111111111111111111     11100000000000000000000000000000
 36    01111111111111111111111111111111     11000000000000000000000000000000
 37    11111111111111111111111111111111     10000000000000000000000000000000

  <remainder zero -- unused>